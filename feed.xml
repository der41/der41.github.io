<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.4">Jekyll</generator><link href="https://der41.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://der41.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2025-10-07T23:47:40+00:00</updated><id>https://der41.github.io/feed.xml</id><title type="html">blank</title><subtitle>A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. </subtitle><entry><title type="html">How to analyze the Black Box - A Look into GradCAM</title><link href="https://der41.github.io/blog/2025/GradCAM/" rel="alternate" type="text/html" title="How to analyze the Black Box - A Look into GradCAM"/><published>2025-10-07T00:00:00+00:00</published><updated>2025-10-07T00:00:00+00:00</updated><id>https://der41.github.io/blog/2025/GradCAM</id><content type="html" xml:base="https://der41.github.io/blog/2025/GradCAM/"><![CDATA[<h2 id="context">Context</h2> <p>Deep learning models have transformed computer vision, enabling machines to recognize objects, detect faces, and even interpret medical images with remarkable precision.<br/> Yet despite their success, <strong>Convolutional Neural Networks (CNNs)</strong> remain notoriously opaque ‚Äî they <em>work</em>, but it‚Äôs often unclear <em>how</em> or <em>why</em>.</p> <p>This lack of transparency has given rise to the term <strong>‚Äúblack box‚Äù</strong>. For researchers and practitioners alike, this raises important questions:</p> <ul> <li>What features does the network focus on?</li> <li>Does it learn meaningful patterns or just statistical shortcuts?</li> <li>How can we trust predictions if we can‚Äôt interpret them?</li> </ul> <p>That‚Äôs where <strong>explainable AI (XAI)</strong> methods come in. Among them, <strong>Gradient-weighted Class Activation Mapping (Grad-CAM)</strong> has become one of the most intuitive and widely used tools to visualize what CNNs are ‚Äúlooking at.‚Äù</p> <hr/> <h2 id="peering-inside-the-network---the-idea-behind-grad-cam">Peering Inside the Network - The Idea Behind Grad-CAM</h2> <p>At its core, Grad-CAM works by tracing back the <strong>gradients of a target class</strong> to the final convolutional layers of a model like <strong>ResNet-50</strong>. Instead of treating the network as an impenetrable stack of filters, Grad-CAM shows us <em>which spatial regions</em> contributed most to a decision.</p> <p>Think of it as <strong>a heatmap over the model‚Äôs attention</strong> ‚Äî highlighting the regions that most influenced the prediction.<br/> For instance, if a ResNet-50 classifies an image as a ‚Äútaxi,‚Äù Grad-CAM Help us to see which set of neurons are activating on the final layer so we can have a clearler view on what the model is picking to make a decision. On the taxi classification we have the following:</p> <div style="width: 70%; margin: 0 auto; text-align: center;"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/taxi_xai-480.webp 480w,/assets/img/taxi_xai-800.webp 800w,/assets/img/taxi_xai-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/taxi_xai.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figcaption>Grad-CAM visualization showing the model‚Äôs focus on distinctive taxi features.</figcaption> </div> <p>These visual explanations not only help us verify that the model attends to relevant features but also reveal when it gets distracted ‚Äî a common cause of overfitting or dataset bias when using Deep Learning Techniques.</p> <hr/> <h2 id="why-explainability-matters">Why Explainability Matters</h2> <p>Explainability is not just about curiosity ‚Äî it‚Äôs about <strong>trust, debugging, and accountability</strong>.</p> <ul> <li><strong>Model validation:</strong> Grad-CAM can expose when models rely on spurious cues (like watermarks or background color).</li> <li><strong>Fairness and bias detection:</strong> In human-centered AI, visual explanations reveal patterns that may unintentionally encode bias.</li> <li><strong>Scientific insight:</strong> In medical imaging, Grad-CAM can highlight regions of pathology that guided a diagnostic model‚Äôs decision.</li> </ul> <p>By turning abstract activations into <strong>interpretable visual evidence</strong>, Grad-CAM builds confidence between model developers and end-users.</p> <hr/> <h2 id="beyond-grad-cam-the-evolving-toolkit-of-xai">Beyond Grad-CAM: The Evolving Toolkit of XAI</h2> <p>Grad-CAM opened the door to a broader family of visualization tools:</p> <ul> <li><strong>Guided Grad-CAM</strong>, which combines gradient visualization with fine-grained saliency maps.</li> <li><strong>EigenCAM</strong>, which decomposes activations into dominant patterns using principal components.</li> <li><strong>Layer-CAM</strong>, which refines attention localization across layers.</li> </ul> <p>Each method builds on the same principle ‚Äî translating mathematical gradients into <strong>human-readable explanations</strong>.</p> <p>Together, they remind us that <em>transparency is not a luxury but a necessity</em> as AI systems become more embedded in real-world decisions. It is important to keep track on how this model make decisions in the real world before deploying them.</p> <hr/> <h2 id="explore-the-implementation">Explore the Implementation</h2> <p>This post focuses on the <strong>conceptual side</strong> of Grad-CAM, but the full <strong>PyTorch implementation</strong> (including ResNet-50 examples and visualization scripts) is available under my explainable AI repo:</p> <p>üëâ <a href="https://github.com/der41/XAI_Duke/blob/main/Notebooks/Explainable_DL_Pytorch.ipynb"><strong>GitHub Repository</strong></a></p> <p>There, you‚Äôll find hands-on notebooks showing how to:</p> <ul> <li>Compute Grad-CAM visualizations step by step,</li> <li>Compare Grad-CAM with Guided Backpropagation,</li> <li>Overlay attention maps on custom images.</li> </ul> <hr/> <h2 id="looking-ahead">Looking Ahead</h2> <p>Explainability techniques like Grad-CAM bridge the gap between human intuition and machine learning.<br/> They help transform <strong>black boxes into glass boxes</strong>, turning uncertainty into understanding.</p> <p>As AI continues to advance, tools like these will be essential not only for <strong>debugging models</strong> but also for <strong>building public trust</strong> in intelligent systems ‚Äî ensuring that performance does not sacrifice transparency.</p> <hr/>]]></content><author><name>Diego Rodriguez</name></author><category term="ML"/><category term="Explainability"/><category term="DL"/><summary type="html"><![CDATA[Deep learning models are powerful but opaque. Grad-CAM provides a way to peek inside, showing which features drive a neural network‚Äôs predictions ‚Äî and why explainability matters for modern AI.]]></summary></entry><entry><title type="html">Unlocking Economics, How AI democratize data access</title><link href="https://der41.github.io/blog/2025/RAG-Data-Agent/" rel="alternate" type="text/html" title="Unlocking Economics, How AI democratize data access"/><published>2025-04-13T00:00:00+00:00</published><updated>2025-04-13T00:00:00+00:00</updated><id>https://der41.github.io/blog/2025/RAG%20Data%20Agent</id><content type="html" xml:base="https://der41.github.io/blog/2025/RAG-Data-Agent/"><![CDATA[<h2 id="context">Context:</h2> <h3 id="the-power-of-ai-in-reducing-information-gaps">The Power of AI in Reducing Information Gaps</h3> <p>Imagine trying to analyze economic trends. You might know what you‚Äôre looking for, but navigating vast databases can be time-consuming and frustrating. Sources like the Central Bank of Chile contain over 20,000 economic records. This wealth of information, while incredibly valuable, is often inaccessible to the average user who lacks the specific knowledge required to query and retrieve the data. EcoDataBot steps in as a powerful helper, bridging this gap and making extensive data readily available.</p> <h3 id="why-are-data-descriptions-a-good-use-case-for-embeddings-and-llms">Why Are Data Descriptions a Good Use Case for Embeddings and LLMs?</h3> <p>The unique structure of the data available from the Central Bank of Chile portal makes it an ideal candidate for embedding techniques. The code descriptions can be very similar to one another, with only small changes in wording that differentiate one indicator from the next. The contextual richness of each description enables Gemini to distinguish between variable transformations and variable names, allowing the model to guide the user toward the correct answer through an iterative process. In this case, the descriptions are available in both English and Spanish.</p> <p>Here‚Äôs how the data looks for the total monthly indicator of economic activity (and this is without counting the 8 other subcategories for each indicator that would appear if we ran an SQL query for ‚Äúmonthly indicator of economic activity‚Äù):</p> <table> <thead> <tr> <th>Name</th> <th>Nombre</th> <th>CODE</th> </tr> </thead> <tbody> <tr> <td>National Accounts, Monthly indicator of economic activity, Imacec, chained volume at previous prices, spliced time series (2018 index=100)#G, Imacec</td> <td>Cuentas Nacionales, Indicador mensual de actividad econ√≥mica, Imacec, volumen a precios del a√±o anterior encadenado, series empalmadas (promedio 2018=100), Imacec</td> <td>F032.IMC.IND.Z.Z.EP18.Z.Z.0.M</td> </tr> <tr> <td>National Accounts, Monthly indicator of economic activity, Imacec, contribution compared with the same period of the previous year, reference 2018, Imacec</td> <td>Cuentas Nacionales, Indicador mensual de actividad econ√≥mica, Imacec, contribuci√≥n porcentual respecto de igual periodo del a√±o anterior, referencia 2018, Imacec</td> <td>F032.IMC.V12.Z.Z.2018.Z.Z.0.M</td> </tr> <tr> <td>National Accounts, Monthly indicator of economic activity, Imacec, contribution to monthly growth, seasonally adjusted, reference 2018, Imacec</td> <td>Cuentas Nacionales, Indicador mensual de actividad econ√≥mica, Imacec, contribuci√≥n porcentual respecto al periodo anterior, desestacionalizado, referencia 2018, Imacec</td> <td>F032.IMC.VAR.Z.Z.2018.Z.Z.3.M</td> </tr> </tbody> </table> <p>As you can see by closely examining the data, dividing it into standardized metadata is not a viable option. The information is not structured consistently‚Äîsome series may or may not include details like unit, frequency, or category. This is where the magic of semantic search comes in! Instead of just matching keywords, semantic search understands the meaning behind your query. It does this by converting both your query and the data (like the 20,000+ economic records in EcoDataBot‚Äôs dataset) into numerical representations called embeddings. These embeddings capture the underlying semantic relationships, so that concepts with similar meanings are positioned close to one another in a vector space.</p> <p>LLMs are particularly effective when using vector datasets to enhance their answer capabilities. To do this meaningfully, they require an ecosystem that provides the right tools in the right context. This is where LangGraph and LangChain shine‚Äîguiding Gemini 2.0 in the right direction. The process ensures that the model asks the user for their requirements, retrieves information from the vector dataset, and only consults the API once it has sufficient confirmation. The diagram below summarizes the functionalities:</p> <div style="width: 90%; margin: 0 auto; text-align: center;"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/rag_diagram-480.webp 480w,/assets/img/rag_diagram-800.webp 800w,/assets/img/rag_diagram-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/rag_diagram.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <hr/> <h2 id="walkthrough">Walkthrough</h2> <h3 id="from-csv-to-vector-database">From CSV to Vector Database</h3> <p>To pass the CSV data into a vector database, first I load the <code class="language-plaintext highlighter-rouge">catalogo.csv</code> file using the pandas library and removes any duplicate entries based on the <code class="language-plaintext highlighter-rouge">CODE</code> column. It then creates a combined text field called search_text using the ‚ÄòName‚Äô and ‚ÄòNombre‚Äô columns from the CSV, which contains descriptions of the economic series in both English and Spanish.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Load your CSV
</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="sh">"</span><span class="s">/kaggle/input/bcch-catalogue/catalogo.csv</span><span class="sh">"</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="sh">"</span><span class="s">CODE</span><span class="sh">"</span><span class="p">],</span> <span class="n">keep</span><span class="o">=</span><span class="sh">"</span><span class="s">first</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># Handle missing values before creating search_text
</span><span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">Name</span><span class="sh">"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">Name</span><span class="sh">"</span><span class="p">].</span><span class="nf">fillna</span><span class="p">(</span><span class="sh">""</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">Nombre</span><span class="sh">"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">Nombre</span><span class="sh">"</span><span class="p">].</span><span class="nf">fillna</span><span class="p">(</span><span class="sh">""</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">CODE</span><span class="sh">"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">CODE</span><span class="sh">"</span><span class="p">].</span><span class="nf">fillna</span><span class="p">(</span><span class="sh">""</span><span class="p">)</span>

<span class="c1"># Create combined text with fallback
</span><span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">search_text</span><span class="sh">"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">Name</span><span class="sh">"</span><span class="p">]</span> <span class="o">+</span> <span class="sh">"</span><span class="s"> </span><span class="sh">"</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">Nombre</span><span class="sh">"</span><span class="p">]</span>

<span class="c1"># Remove any remaining empty strings/NULLs
</span><span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">search_text</span><span class="sh">"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">search_text</span><span class="sh">"</span><span class="p">].</span><span class="nf">fillna</span><span class="p">(</span><span class="sh">""</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="sh">"</span><span class="s">^</span><span class="se">\\</span><span class="s">s+$</span><span class="sh">"</span><span class="p">,</span> <span class="sh">""</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># Create combined text for semantic search
</span><span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">search_text</span><span class="sh">"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">Name</span><span class="sh">"</span><span class="p">]</span> <span class="o">+</span> <span class="sh">"</span><span class="s"> </span><span class="sh">"</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">Nombre</span><span class="sh">"</span><span class="p">]</span>

<span class="c1"># Create metadata storage
</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="sh">"</span><span class="s">CODE</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Name</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Nombre</span><span class="sh">"</span><span class="p">]].</span><span class="nf">to_dict</span><span class="p">(</span><span class="sh">"</span><span class="s">records</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <p>Next, it initializes a Chroma vector database client. The agent uses the <code class="language-plaintext highlighter-rouge">text-embedding-004</code> model from the Google GenAI class as its embedding function to convert the search_text into numerical vector embeddings.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Define a helper to retry when per-minute quota is reached.
</span><span class="n">is_retriable</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="p">(</span><span class="nf">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">genai</span><span class="p">.</span><span class="n">errors</span><span class="p">.</span><span class="n">APIError</span><span class="p">)</span> <span class="ow">and</span> <span class="n">e</span><span class="p">.</span><span class="n">code</span> <span class="ow">in</span> <span class="p">{</span><span class="mi">429</span><span class="p">,</span> <span class="mi">503</span><span class="p">})</span>

<span class="c1">#GeminiEmbedding Used during the Kaggle Google GenAI Course
</span><span class="k">class</span> <span class="nc">GeminiEmbeddingFunction</span><span class="p">(</span><span class="n">EmbeddingFunction</span><span class="p">):</span>
    <span class="c1"># Specify whether to generate embeddings for documents, or queries
</span>    <span class="n">document_mode</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="nd">@retry.Retry</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="n">is_retriable</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">:</span> <span class="n">Documents</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Embeddings</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">document_mode</span><span class="p">:</span>
            <span class="n">embedding_task</span> <span class="o">=</span> <span class="sh">"</span><span class="s">retrieval_document</span><span class="sh">"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">embedding_task</span> <span class="o">=</span> <span class="sh">"</span><span class="s">retrieval_query</span><span class="sh">"</span>

        <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">models</span><span class="p">.</span><span class="nf">embed_content</span><span class="p">(</span>
            <span class="n">model</span><span class="o">=</span><span class="sh">"</span><span class="s">models/text-embedding-004</span><span class="sh">"</span><span class="p">,</span>
            <span class="n">contents</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="p">.</span><span class="nc">EmbedContentConfig</span><span class="p">(</span>
                <span class="n">task_type</span><span class="o">=</span><span class="n">embedding_task</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">e</span><span class="p">.</span><span class="n">values</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">response</span><span class="p">.</span><span class="n">embeddings</span><span class="p">]</span>

<span class="c1">#Initialize ChromaDB
</span><span class="n">chroma_client</span> <span class="o">=</span> <span class="nc">Client</span><span class="p">()</span>
<span class="n">embed_fn</span> <span class="o">=</span> <span class="nc">GeminiEmbeddingFunction</span><span class="p">()</span>
<span class="n">embed_fn</span><span class="p">.</span><span class="n">document_mode</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">chroma_client</span><span class="p">.</span><span class="nf">get_or_create_collection</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">bcch_indicators</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">embedding_function</span><span class="o">=</span><span class="n">embed_fn</span>
<span class="p">)</span>
</code></pre></div></div> <p>Finally, it adds these embeddings, along with the corresponding <code class="language-plaintext highlighter-rouge">CODE</code> as unique identifiers and the ‚ÄòCODE‚Äô, ‚ÄòName‚Äô, and ‚ÄòNombre‚Äô columns as metadata, into the Chroma vector database in batches for efficient processing.</p> <p>The final output of this process is a populated Chroma vector database containing vector embeddings of the economic series descriptions and their associated metadata, enabling semantic search capabilities.</p> <h3 id="then-is-all-about-the-workflow">Then, is all about the workflow</h3> <p>Now that we have the main search capability to enrich the filtering capacity of the LLM is moment to add the workflow using Langraphs and Langchain.</p> <p>First, defining the tools that are then integrated into a langgraph framework using distinct nodes that define the agent‚Äôs workflow:</p> <ul> <li><code class="language-plaintext highlighter-rouge">chroma_search_series</code> tool leverages Gemini‚Äôs semantic capabilities to query a Chroma vector database containing embeddings of economic series descriptions, taking a text query as input and returning the most relevant series codes and descriptions</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">chroma_search_series</span><span class="p">(</span>
    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">n_results</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="sh">"</span><span class="s">Number of results to return</span><span class="sh">"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">15</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
    <span class="sh">"""</span><span class="s">Search economic series using semantic similarity.</span><span class="sh">"""</span>
    <span class="n">embed_fn</span><span class="p">.</span><span class="n">document_mode</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1"># Query mode
</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="nf">query</span><span class="p">(</span>
        <span class="n">query_texts</span><span class="o">=</span><span class="p">[</span><span class="n">query</span><span class="p">],</span>
        <span class="n">n_results</span><span class="o">=</span><span class="n">n_results</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Extract and format metadata
</span>    <span class="k">return</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="sh">"</span><span class="s">code</span><span class="sh">"</span><span class="p">:</span> <span class="n">metadata</span><span class="p">[</span><span class="sh">"</span><span class="s">CODE</span><span class="sh">"</span><span class="p">],</span>
            <span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span> <span class="n">metadata</span><span class="p">[</span><span class="sh">"</span><span class="s">Name</span><span class="sh">"</span><span class="p">],</span>
            <span class="sh">"</span><span class="s">nombre</span><span class="sh">"</span><span class="p">:</span> <span class="n">metadata</span><span class="p">[</span><span class="sh">"</span><span class="s">Nombre</span><span class="sh">"</span><span class="p">]</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">metadata</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="sh">"</span><span class="s">metadatas</span><span class="sh">"</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="p">]</span>
</code></pre></div></div> <ul> <li><code class="language-plaintext highlighter-rouge">get_series</code> tool is responsible for retrieving actual time series data from the Central Bank of Chile‚Äôs Economic Portal API based on parameters extracted from tool calls</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_series</span><span class="p">(</span><span class="n">json_input</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">
    Processes input JSON/dict from the LLM and retrieves data from the BCCh.

    Args:
        json_input (str/dict): Input JSON/dict. Example:
            {
                </span><span class="sh">"</span><span class="s">series</span><span class="sh">"</span><span class="s">: [</span><span class="sh">"</span><span class="s">F032.IMC.IND.Z.Z.2008.03.Z.0.M</span><span class="sh">"</span><span class="s">, </span><span class="sh">"</span><span class="s">F032.IMC.IND.Z.Z.EP18.N03.Z.0.M</span><span class="sh">"</span><span class="s">],
                </span><span class="sh">"</span><span class="s">nombres</span><span class="sh">"</span><span class="s">: [</span><span class="sh">"</span><span class="s">imacec minero</span><span class="sh">"</span><span class="s">, </span><span class="sh">"</span><span class="s">imacec no-minero</span><span class="sh">"</span><span class="s">],
                </span><span class="sh">"</span><span class="s">desde</span><span class="sh">"</span><span class="s">: </span><span class="sh">"</span><span class="s">2014-01-01</span><span class="sh">"</span><span class="s">,
                </span><span class="sh">"</span><span class="s">hasta</span><span class="sh">"</span><span class="s">: </span><span class="sh">"</span><span class="s">2024-01-01</span><span class="sh">"</span><span class="s">
            }

    Returns:
        str: Data returned as a formatted JSON string, including intuitive names for each series.
    </span><span class="sh">"""</span>

    <span class="c1"># Sanitize input (replace curly quotes, etc.)
</span>    <span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">json_input</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sanitized</span> <span class="o">=</span> <span class="n">json_input</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="sh">"</span><span class="s">‚Äú</span><span class="sh">"</span><span class="p">,</span> <span class="sh">'"'</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="sh">"</span><span class="s">‚Äù</span><span class="sh">"</span><span class="p">,</span> <span class="sh">'"'</span><span class="p">).</span><span class="nf">encode</span><span class="p">(</span><span class="sh">'</span><span class="s">ascii</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">ignore</span><span class="sh">'</span><span class="p">).</span><span class="nf">decode</span><span class="p">()</span>
            <span class="n">params</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">loads</span><span class="p">(</span><span class="n">sanitized</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">json</span><span class="p">.</span><span class="n">JSONDecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nc">ValueError</span><span class="p">(</span><span class="sh">"</span><span class="s">Input should be a JSON string or a dictionary, not a list. Please remove extra commentary.</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">json_input</span>

    <span class="c1"># If 'json_input' key exists, use its value
</span>    <span class="k">if</span> <span class="sh">"</span><span class="s">json_input</span><span class="sh">"</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="sh">"</span><span class="s">json_input</span><span class="sh">"</span><span class="p">]</span>

    <span class="c1"># Normalize keys to lower-case
</span>    <span class="n">params_lower</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">.</span><span class="nf">lower</span><span class="p">():</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">params</span><span class="p">.</span><span class="nf">items</span><span class="p">()}</span>

    <span class="c1"># Validate required keys
</span>    <span class="n">required_keys</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">series</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">desde</span><span class="sh">"</span><span class="p">]</span>
    <span class="n">missing</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">required_keys</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">params_lower</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">missing</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nc">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Par√°metros faltantes: </span><span class="si">{</span><span class="n">missing</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

    <span class="c1"># Ensure 'series' is a list
</span>    <span class="k">if</span> <span class="ow">not</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">params_lower</span><span class="p">[</span><span class="sh">"</span><span class="s">series</span><span class="sh">"</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="nc">ValueError</span><span class="p">(</span><span class="sh">"'</span><span class="s">series</span><span class="sh">'</span><span class="s"> debe ser una lista.</span><span class="sh">"</span><span class="p">)</span>

    <span class="c1"># Format dates (forcing YYYY-MM-DD)
</span>    <span class="n">date_format</span> <span class="o">=</span> <span class="sh">"</span><span class="s">%Y-%m-%d</span><span class="sh">"</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">desde</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">to_datetime</span><span class="p">(</span><span class="n">params_lower</span><span class="p">[</span><span class="sh">"</span><span class="s">desde</span><span class="sh">"</span><span class="p">]).</span><span class="nf">strftime</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span>
        <span class="n">hasta</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">to_datetime</span><span class="p">(</span><span class="n">params_lower</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">"</span><span class="s">hasta</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">today</span><span class="sh">"</span><span class="p">)).</span><span class="nf">strftime</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nc">ValueError</span><span class="p">(</span><span class="sh">"</span><span class="s">Formato de fecha inv√°lido. Use YYYY-MM-DD.</span><span class="sh">"</span><span class="p">)</span> <span class="k">from</span> <span class="n">e</span>

    <span class="c1"># Retrieve data in chunks (max 2 series per API call)
</span>    <span class="n">chunk_size</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">all_data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">params_lower</span><span class="p">[</span><span class="sh">"</span><span class="s">series</span><span class="sh">"</span><span class="p">]),</span> <span class="n">chunk_size</span><span class="p">):</span>
        <span class="n">chunk</span> <span class="o">=</span> <span class="n">params_lower</span><span class="p">[</span><span class="sh">"</span><span class="s">series</span><span class="sh">"</span><span class="p">][</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">chunk_size</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">siete</span><span class="p">.</span><span class="nf">cuadro</span><span class="p">(</span>
                <span class="n">series</span><span class="o">=</span><span class="n">chunk</span><span class="p">,</span>
                <span class="n">desde</span><span class="o">=</span><span class="n">desde</span><span class="p">,</span>
                <span class="n">hasta</span><span class="o">=</span><span class="n">hasta</span>
            <span class="p">)</span>
            <span class="n">all_data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">concat</span><span class="p">([</span><span class="n">all_data</span><span class="p">,</span> <span class="n">data</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nc">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Error BCCH en series </span><span class="si">{</span><span class="n">chunk</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="nf">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

    <span class="c1"># Convert all data to numeric values
</span>    <span class="n">all_data</span> <span class="o">=</span> <span class="n">all_data</span><span class="p">.</span><span class="nf">apply</span><span class="p">(</span><span class="n">pd</span><span class="p">.</span><span class="n">to_numeric</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="sh">"</span><span class="s">coerce</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">all_data</span><span class="p">.</span><span class="nf">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="sh">"</span><span class="s">list</span><span class="sh">"</span><span class="p">)</span>

    <span class="c1"># Retrieve the intuitive names; if none are provided, default to empty strings
</span>    <span class="n">nombres</span> <span class="o">=</span> <span class="n">params_lower</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">"</span><span class="s">nombres</span><span class="sh">"</span><span class="p">,</span> <span class="p">[</span><span class="sh">""</span><span class="p">]</span> <span class="o">*</span> <span class="nf">len</span><span class="p">(</span><span class="n">params_lower</span><span class="p">[</span><span class="sh">"</span><span class="s">series</span><span class="sh">"</span><span class="p">]))</span>

    <span class="c1"># Build a list of objects where each object contains the code, the intuitive name, and the values
</span>    <span class="n">series_codes</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="nf">keys</span><span class="p">())</span>
    <span class="n">data_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">code</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">series_codes</span><span class="p">):</span>
        <span class="c1"># Use the corresponding intuitive name if available; otherwise, fall back to the code itself
</span>        <span class="n">name</span> <span class="o">=</span> <span class="n">nombres</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nf">len</span><span class="p">(</span><span class="n">nombres</span><span class="p">)</span> <span class="ow">and</span> <span class="n">nombres</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">else</span> <span class="n">code</span>
        <span class="n">data_list</span><span class="p">.</span><span class="nf">append</span><span class="p">({</span>
            <span class="sh">"</span><span class="s">code</span><span class="sh">"</span><span class="p">:</span> <span class="n">code</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">values</span><span class="sh">"</span><span class="p">:</span> <span class="n">result</span><span class="p">[</span><span class="n">code</span><span class="p">]</span>
        <span class="p">})</span>

    <span class="c1"># Convert the final result to a JSON string with indentation
</span>    <span class="n">json_result</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">({</span><span class="sh">"</span><span class="s">data</span><span class="sh">"</span><span class="p">:</span> <span class="n">data_list</span><span class="p">},</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">json_result</span>
</code></pre></div></div> <p>Second, defining the nodes of interactions within the model</p> <ul> <li>The <code class="language-plaintext highlighter-rouge">human_node</code> manages user interaction by displaying the last bot message and prompting for new input, or showing a welcome message initially.</li> <li>The <code class="language-plaintext highlighter-rouge">chatbot_node</code> takes the conversation history and system instructions to invoke the Gemini 2.0 model to generate the assistant‚Äôs response.</li> <li>The <code class="language-plaintext highlighter-rouge">search_tool_node</code> is activated when a search tool call is made, using <code class="language-plaintext highlighter-rouge">chroma_search_series</code> to find relevant economic series and format the results.</li> <li>The <code class="language-plaintext highlighter-rouge">data_tool_node</code> is triggered for data retrieval tool calls, using <code class="language-plaintext highlighter-rouge">get_series</code> to fetch data and optionally plot it.</li> <li>The <code class="language-plaintext highlighter-rouge">route_decision</code> node acts as the workflow‚Äôs control, determining the next node to activate based on the current conversation state, including checking for the end of the conversation or the type of the last message and its tool calls.</li> </ul> <p>The entire workflow is orchestrated by creating a <code class="language-plaintext highlighter-rouge">StateGraph</code> in LangGraph and defining conditional edges based on the <code class="language-plaintext highlighter-rouge">route_decision</code> function, with the Gemini 2.0 model integrated using ChatGoogleGenerativeAI and the defined tools bound to it. The following code resume the zero-prompting technique used on this bot:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Define state management using of the Economic Bot
</span><span class="k">class</span> <span class="nc">AnalysisState</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">State representing financial data analysis conversation.</span><span class="sh">"""</span>
    <span class="n">messages</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">],</span> <span class="n">add_messages</span><span class="p">]</span>
    <span class="n">current_series</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">raw_data</span><span class="p">:</span> <span class="n">Dict</span>
    <span class="n">finished</span><span class="p">:</span> <span class="nb">bool</span>

<span class="n">FINANCIAL_SYSINT</span> <span class="o">=</span> <span class="nc">SystemMessage</span><span class="p">(</span>
    <span class="n">content</span><span class="o">=</span><span class="p">(</span>
        <span class="sh">"</span><span class="s">You are EconomicDataBot, an interactive system for accessing and analyzing data from the Central Bank of Chile. </span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">Your capabilities include:</span><span class="se">\n</span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">1. Searching for relevant economic series using </span><span class="sh">'</span><span class="s">search_series</span><span class="sh">'</span><span class="s">.</span><span class="se">\n</span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">2. Retrieving time series data with </span><span class="sh">'</span><span class="s">get_series</span><span class="sh">'</span><span class="s">.</span><span class="se">\n</span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">3. Clarifying and confirming user requests with follow-up questions.</span><span class="se">\n</span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">4. Validating series IDs and date parameters to ensure they match the official nomenclature.</span><span class="se">\n</span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">5. Presenting results in clear, structured formats (tables, lists, or JSON as needed).</span><span class="se">\n\n</span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">6. Once you have the data return a summary of the information of the data retrieved</span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">Always confirm that the series IDs match the official nomenclature and verify the date ranges before fetching data. </span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">Maintain a professional, clear, and approachable tone in your responses. </span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">If the input is ambiguous or incomplete, ask the user for clarification. </span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">Your goal is to help users access the most relevant economic data accurately and efficiently.</span><span class="sh">"</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Updated welcome message for initiating conversation
</span><span class="n">WELCOME_MSG</span> <span class="o">=</span> <span class="p">(</span>
    <span class="sh">"</span><span class="s">I am EconomicDataBot, here to help you search, validate, and retrieve economic data. </span><span class="sh">"</span>
    <span class="sh">"</span><span class="s">How can I assist you today? </span><span class="sh">"</span>
    <span class="sh">"</span><span class="s">For example, you can ask for a specific time series or provide criteria to search for the data you need.</span><span class="sh">"</span>
<span class="p">)</span>
</code></pre></div></div> <hr/> <h2 id="application-at-work">Application at work</h2> <p>Now the EcoDataBot application is ready for action! Give it a try at this <a href="https://www.kaggle.com/code/dirodrigue/rag-ecodatabot">Kaggle Notebook</a> or if you prefer to watch a live demo check out this Youtube <a href="https://youtu.be/SGp0rEnYl2M">video</a>. From the minute <a href="https://youtu.be/SGp0rEnYl2M?si=7OqINGhIfVSAb-D9&amp;t=634">10:34</a> when I start using the app.</p>]]></content><author><name>Diego Rodriguez</name></author><category term="Economy"/><category term="Data"/><category term="RAG"/><category term="AI"/><category term="LLMs"/><summary type="html"><![CDATA[Ever felt lost in a sea of economic data, desperately searching for that one crucial indicator? The world of finance can be overwhelming, with countless metrics and complex datasets often locked away or difficult to navigate. But what if accessing and understanding this information became as simple as having a conversation?]]></summary></entry><entry><title type="html">Services Inflation, A Global Phenomenon with Persistent Risks</title><link href="https://der41.github.io/blog/2024/Inflation_goodsvsservices/" rel="alternate" type="text/html" title="Services Inflation, A Global Phenomenon with Persistent Risks"/><published>2024-07-16T00:00:00+00:00</published><updated>2024-07-16T00:00:00+00:00</updated><id>https://der41.github.io/blog/2024/Inflation_goodsvsservices</id><content type="html" xml:base="https://der41.github.io/blog/2024/Inflation_goodsvsservices/"><![CDATA[<h2 id="context">Context:</h2> <h3 id="the-recent-evolution-of-global-service-inflation">The Recent evolution of Global Service inflation</h3> <p>Services inflation has remained stubbornly high across developed and emerging economies, contributing around one percentage point to total inflation above pre-pandemic levels. Annual global inflation contributes over 80%, while the other 20% is the sum of the remaining elements. This unusual global synchrony highlights unique factors driving services inflation and points to a slower path toward normalization.</p> <div style="width: 70%; margin: 0 auto; text-align: center;"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/service_cont-480.webp 480w,/assets/img/service_cont-800.webp 800w,/assets/img/service_cont-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/service_cont.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <h3 id="the-unusual-synchronization-of-services-inflation">The Unusual Synchronization of Services Inflation</h3> <p>Historically, service inflation has been closely tied to domestic economic cycles. However, since the pandemic, a more global pattern has emerged. Estimates using dynamic factor models reveal that the global factor driving services inflation accounted for about 50% of its variance post-pandemic‚Äîup from just 15% during 2015-2019.</p> <hr/> <h2 id="drivers">Drivers</h2> <p>This synchronization among global inflation can be attributed to:</p> <ul> <li>Pandemic-Related Shocks: Global lockdowns and supply chain disruptions created synchronized demand movement through restrictions on movement and trade.</li> <li>Geopolitical Crises: The war in Ukraine compounded these effects by disrupting global trade and pushing up transportation and raw materials costs.</li> <li>Policy Responses: Monetary and fiscal measures taken worldwide to address these shocks also played a role in aligning inflation dynamics. These policies acted simultaneously worldwide.</li> <li>The rebalancing of relative prices between goods and services: Following the pandemic, service prices fell behind the general price level as goods inflation surged. Much of the recent increase in services inflation has been driven by a correction in these relative prices. However, the process is essentially complete, with limited scope for further rebalancing to contribute to inflation normalization.</li> </ul> <div style="width: 70%; margin: 0 auto; text-align: center;"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/relative_price2-480.webp 480w,/assets/img/relative_price2-800.webp 800w,/assets/img/relative_price2-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/relative_price2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <hr/> <h2 id="risks-of-persistent-services-inflation">Risks of Persistent Services Inflation</h2> <p>Evidence suggests that service inflation tends to be more persistent during periods of high overall inflation due to indexation mechanisms. For instance, in the US, services inflation persistence doubled during the inflationary spike of 2021-2022. While persistence has eased recently, it remains elevated compared to pre-pandemic levels, posing a risk of delayed normalization.</p> <p>Furthermore, country-specific factors also contribute to the dynamics of services inflation, including Monetary and fiscal policies, migration trends, changes in productivity and investor sentiment, and geopolitical developments affecting global goods prices.</p> <hr/> <h2 id="what-lies-ahead">What Lies Ahead?</h2> <p>The path to normalizing services inflation will likely extend over the next few quarters. Several factors could slow this process, such as intensified indexation mechanisms during the inflationary spike, resilient consumer demand in key markets like the US, and Country-specific dynamics affecting relative price adjustments. While total inflation may continue to ease, services inflation remains a wildcard that could delay full convergence to pre-pandemic levels, especially in economies with resilient demand and policy-driven price adjustments.</p>]]></content><author><name>Diego Rodriguez</name></author><category term="Economy"/><category term="Inflation"/><category term="Global"/><category term="Analytics"/><category term="ML"/><summary type="html"><![CDATA[Inflation in services has become a defining feature of the current economic landscape, diverging sharply from trends in goods, food, and energy prices. This is a partial translation of the analysis we conducted on the minutes cited for the Monetary Policy Report of the CBCH, Jun 2024]]></summary></entry><entry><title type="html">Copper Prices Are Climbing, What‚Äôs Behind the Surge?</title><link href="https://der41.github.io/blog/2024/Copper_prices/" rel="alternate" type="text/html" title="Copper Prices Are Climbing, What‚Äôs Behind the Surge?"/><published>2024-06-30T00:00:00+00:00</published><updated>2024-06-30T00:00:00+00:00</updated><id>https://der41.github.io/blog/2024/Copper_prices</id><content type="html" xml:base="https://der41.github.io/blog/2024/Copper_prices/"><![CDATA[<h2 id="context">Context:</h2> <p>Copper, often called ‚Äúthe metal of the future,‚Äù given its usage in green energy technologies, has seen a significant price rally in 2024, with its value increasing by about 15% this year alone. This price jump has far-reaching implications for global markets and economies, particularly those reliant on copper exports, like Chile. So, what‚Äôs driving this surge, and how persistent is it likely to be?</p> <hr/> <h2 id="short-term-drivers">Short-Term Drivers</h2> <h3 id="whats-causing-the-price-increase">What‚Äôs Causing the Price Increase?</h3> <p>Several interconnected factors are fueling the rise in copper prices:</p> <ul> <li> <p>Supply Constraints in a High-Demand World Copper‚Äôs critical role in the energy transition‚Äîthink electric vehicles, renewable energy infrastructure, and electrification‚Äîhas driven demand to unprecedented levels. Meanwhile, supply constraints, including declining global inventories and narrow refining margins, have created a scarcity reflected in the market.</p> </li> <li> <p>Geopolitical and Speculative Pressures Sanctions on Russian copper storage in the London Metal Exchange and increased speculative trading have further tightened supply.</p> </li> <li> <p>Broader Trends in Metals and Risky Assets Copper isn‚Äôt alone. Other metals and risky assets have also experienced price increases this year, influenced by factors like ‚Äúgreen demand‚Äù shocks tied to the energy transition and economic resilience in key markets like the U.S., China, and India.</p> </li> <li> <p>Economic Resilience and Growth The strength of the U.S. economy, China‚Äôs steadier-than-expected growth of around 5%, and India‚Äôs rising role as a global growth engine have boosted confidence in copper and other strategic commodities.</p> </li> </ul> <hr/> <h2 id="long-term-drivers">Long-Term Drivers</h2> <h3 id="will-these-high-prices-persist">Will These High Prices Persist?</h3> <p>The persistence of copper‚Äôs price rally depends on the factors driving it. Specific drivers like increased risk appetite and speculative pressures are expected to be transitory. In contrast, others‚Äîsuch as demand from the energy transition and economic growth in emerging markets‚Äîare likely to sustain higher prices in the medium term. We applied a Bayesian Sign-Restriction VAR to the copper market to disentangle this effect. Identifying that mainly demand related to fundamentals should be permanent, raising the medium-term price outlook around 10%</p> <div style="width: 70%; margin: 0 auto; text-align: center;"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/Copper_semi_structural-480.webp 480w,/assets/img/Copper_semi_structural-800.webp 800w,/assets/img/Copper_semi_structural-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/Copper_semi_structural.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <p>As a Benchmark, Forecasts suggest that more than half of the recent price increase will persist, with medium-term prices revised from $3.85 to $4.30 per pound for 2024-2026. Market consensus and government outlooks align with this expectation, showing upward revisions between 6% to 14% since early 2024.</p> <hr/> <h2 id="looking-ahead">Looking Ahead</h2> <p>The rise in copper prices underscores the metal‚Äôs critical role in the global energy transition and economic growth. The current forecast reflects an optimistic medium-term outlook, but the evolving dynamics of supply, demand, and geopolitical factors warrant close monitoring. For now, economies tied to copper production can expect a boost.</p>]]></content><author><name>Diego Rodriguez</name></author><category term="Economy"/><category term="Commodities"/><category term="Global"/><category term="Analytics"/><category term="ML"/><summary type="html"><![CDATA[Copper, often called ‚Äúthe metal of the future,‚Äù has seen a significant price rally in 2024, with its value increasing by about 15% this year alone. This is a partial translation of the analysis we conducted on the minutes cited for the Monetary Policy Report of the CBCH, Jun 2024]]></summary></entry><entry><title type="html">Global Inflation Convergence, A Risky Road Ahead</title><link href="https://der41.github.io/blog/2024/Inflationconvergence/" rel="alternate" type="text/html" title="Global Inflation Convergence, A Risky Road Ahead"/><published>2024-04-12T00:00:00+00:00</published><updated>2024-04-12T00:00:00+00:00</updated><id>https://der41.github.io/blog/2024/Inflationconvergence</id><content type="html" xml:base="https://der41.github.io/blog/2024/Inflationconvergence/"><![CDATA[<h2 id="context">Context:</h2> <h3 id="the-recent-evolution-of-global-inflation">The Recent evolution of Global Inflation</h3> <p>Since mid-2022, inflation has been declining across advanced and emerging economies‚Äîa welcome relief in a world grappling with financial pressures. Much of this drop has been attributed to falling goods prices, driven by the resolution of supply chain disruptions, declining transportation costs, and easing commodity prices. However, this path to lower inflation isn‚Äôt without bumps, especially as several underlying factors begin to shift.</p> <hr/> <h2 id="drivers">Drivers:</h2> <h3 id="whats-driving-inflation-down">What‚Äôs Driving Inflation Down?</h3> <ol> <li>Supply Chain Recovery: During the pandemic, snarled supply chains and sky-high shipping costs pushed global inflation upward. But as production chains normalized and transportation costs fell, inflationary pressures eased. Analyzing shipping cost and inflation using local projections suggests that shipping cost normalization alone reduced global inflation by about 0.7 percentage points in recent months.</li> </ol> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/transportation_cost-480.webp 480w,/assets/img/transportation_cost-800.webp 800w,/assets/img/transportation_cost-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/transportation_cost.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <ol> <li> <p>Energy Prices Dropping from Peaks: Following the 2022 surge in energy prices after Russia invaded Ukraine, global energy markets stabilized, aided by increased non-OPEC+ production and the U.S. releasing its strategic petroleum reserves. The increased crude oil on the market decreased prices and relieved global inflation.</p> </li> <li> <p>China‚Äôs Role in Disinflation: Weak consumption in China and robust manufacturing output have also contributed to global disinflation, particularly in goods excluding food and energy. By analyzing inflation‚Äôs underlying dynamics with a Bayesian Sing Restriction VAR, we found that China‚Äôs economic conditions in the second half of 2023 helped reduce goods inflation in the U.S. by over one percentage point.</p> </li> </ol> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/US_inflation_CHN-480.webp 480w,/assets/img/US_inflation_CHN-800.webp 800w,/assets/img/US_inflation_CHN-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/US_inflation_CHN.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <hr/> <h2 id="emerging-risks">Emerging Risks</h2> <h3 id="there-are-signs-that-some-deflationary-tailwinds-may-be-reversing">There are signs that some deflationary tailwinds may be reversing:</h3> <ul> <li> <p>Rising Transportation Costs: New conflicts in the Middle East and the Red Sea are pushing shipping costs higher. These elevated costs could add 0.4 percentage points to global inflation by 2025 if sustained for six months.</p> </li> <li> <p>Energy Market Uncertainty: With U.S. oil production expected to slow and OPEC+ holding production steady, the outlook for energy supply is less favorable. Any worsening geopolitical tensions could further strain oil markets, increasing prices.</p> </li> <li> <p>China‚Äôs Fragile Balance: The current disinflationary effects of China‚Äôs economy hinge on weak domestic consumption and high industrial output. A rebound in consumption or a slowdown in manufacturing could diminish these effects, putting upward pressure on global inflation.</p> </li> </ul> <hr/> <h2 id="uncertain-path-forward">Uncertain Path Forward</h2> <p>The global inflation story has primarily been a tale of goods prices coming down thanks to improved supply-side conditions. However, these deflationary drivers‚Äîlike normalized shipping costs, energy markets, and China‚Äôs economic dynamics‚Äîshow signs of fading. As these effects wane, the pace at which global inflation converges to target levels could slow, leaving room for new inflationary pressures to emerge. In short, while inflation‚Äôs downward trajectory has brought optimism, the risks lurking beneath the surface remind us that the road ahead may still be rocky.</p>]]></content><author><name>Diego Rodriguez</name></author><category term="Economy"/><category term="Inflation"/><category term="Global"/><category term="Analytics"/><category term="ML"/><summary type="html"><![CDATA[Since mid-2022, inflation has been declining across advanced and emerging economies‚Äîa welcome, however risk are looming on the horizon. This is a partial translation of the analysis we conducted on the minutes cited on the Monetary Policy Report of the CBCH, Mar 2024]]></summary></entry><entry><title type="html">Why Independent Fiscal Institutions Matter, Lessons for Latin America</title><link href="https://der41.github.io/blog/2024/OECDpaper/" rel="alternate" type="text/html" title="Why Independent Fiscal Institutions Matter, Lessons for Latin America"/><published>2024-02-03T00:00:00+00:00</published><updated>2024-02-03T00:00:00+00:00</updated><id>https://der41.github.io/blog/2024/OECDpaper</id><content type="html" xml:base="https://der41.github.io/blog/2024/OECDpaper/"><![CDATA[<h2 id="context">Context</h2> <p>Let‚Äôs talk about independent fiscal institutions (IFIs)‚Äîyou know, those watchdogs keeping government finances in check. They don‚Äôt always get the spotlight but are crucial for ensuring transparency, accountability, and trust in public spending. A recent OECD report dives into how IFIs are structured worldwide and what Latin America can learn from their experiences.</p> <h3 id="what-exactly-are-ifis">What Exactly Are IFIs?</h3> <p>Think of IFIs as the fiscal equivalent of referees in a sports game. Their job is to call out overspending, keep forecasts realistic, and ensure budgetary rules aren‚Äôt just words on paper. For example, the US has the Congressional Budget Office to share reliable spending and income with the government. But here‚Äôs the thing‚Äîno two IFIs are the same. To understand their diversity, in this document we use a statistical approach called k-means clustering, an unsupervised machine learning technique, to group IFIs based on their size, mandate, and functions.</p> <hr/> <h2 id="k-means">K-means</h2> <p>Imagine sorting a big pile of fiscal institutions into groups without knowing much about them beforehand. Clustering looks for patterns in the data‚Äîgrouping IFIs with similar tasks and resources‚Äîwhile ensuring the groups are as distinct as possible. For example, k-means minimizes differences within a group and maximizes differences between groups by organizing the data around ‚Äúcentroids‚Äù (essentially, the center of a group).</p> <p>Using K-means, four distinct clusters of IFIs are revealed :</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/publication_preview/IFIs_2024_Clusters-480.webp 480w,/assets/img/publication_preview/IFIs_2024_Clusters-800.webp 800w,/assets/img/publication_preview/IFIs_2024_Clusters-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/publication_preview/IFIs_2024_Clusters.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <ol> <li>Small but mighty: These are focused on monitoring compliance with fiscal rules, often with limited resources. Consider them specialists‚Äîlike Ireland‚Äôs Fiscal Advisory Council‚Äîkeeping governments honest about spending.</li> <li>Medium-sized multitaskers: Adding more complexity to their role, these IFIs assess compliance while conducting policy costing and macroeconomic analysis. Spain‚Äôs fiscal council, AIReF, is a prime example.</li> <li>Parliamentary Budget Offices (PBOs): These focus on supporting legislators, responding to specific requests, and performing policy costings. Canada‚Äôs PBO, for instance, delivers tailored fiscal analysis directly to parliamentarians.</li> <li>Big players: These are the heavyweights, producing official macroeconomic forecasts and handling complex, resource-intensive tasks. The Netherlands‚Äô CPB Bureau for Economic Policy Analysis is a standout here.</li> </ol> <p>Each type serves its purpose, and its design reflects the fiscal priorities and maturity of the country they are in. For example, smaller IFIs often emerge in nations just starting to focus on fiscal discipline, while larger ones thrive in countries with well-established governance systems. We interviewed good practices in each cluster to understand better what set them apart in their task toward better fiscal policies.</p> <hr/> <h2 id="interviews">Interviews</h2> <h3 id="leaders-within-each-cluster-and-lessons-learned">Leaders within each Cluster and lessons learned</h3> <p>What sets successful Independent Fiscal Institutions (IFIs) apart? Drawing from OECD experiences, it comes down to three essential pillars:</p> <p>Independence is Non-Negotiable Autonomy is critical for any IFI to thrive. Legal protection, multi-year budgets, and the ability to hire staff independently ensure these institutions are shielded from political influence. Without true independence, IFIs risk being seen as mere extensions of the government, undermining their credibility. Inspired by the Independence of the US Congressional Budget Office, Korea‚Äôs National Assembly Budget Office (NABO) began with a limited scope. Over time, it expanded to cover long-term forecasts, program evaluations, and bill costings, supporting the legislature in overseeing the executive branch.</p> <p>Transparency is a Superpower IFIs must communicate their findings clearly and accessibly to the public, media, and policymakers. Transparent reports and open dialogue build trust and amplify their impact on fiscal policy. Illustrative is the case of Spain‚Äôs AIReF, which faced challenges accessing information in its early days. Through transparent reporting and a broad mandate‚Äîincluding monitoring fiscal rules and conducting policy costing‚Äîit built a strong reputation as a reliable and independent institution</p> <p>Start Small, Then Grow Many successful IFIs began with narrowly focused mandates, gradually expanding as they built credibility and capacity. Chile, for instance, transitioned from an advisory council to a fully autonomous fiscal council in 2019. This shift enabled it to address pressing issues, including budgetary sustainability and public trust, especially during economic strain like the COVID-19 pandemic.</p> <hr/> <h2 id="lessons-for-latam">Lessons for LATAM</h2> <p>What This Means for Latin America Post-COVID, many Latin American countries are grappling with high debt and tighter budgets. Stronger IFIs can help manage this crisis by promoting responsible policies and rebuilding trust.</p> <p>Start small, but aim high. Begin with a clear, narrow mandate, then expand as credibility grows. Stay and defend the independent framework. Legal and operational autonomy should be baked into the design and long-term planning. Communicate, communicate, communicate. Even the best analysis won‚Äôt matter if no one understands or trusts it. Latin America has a significant opportunity to learn from global best practices and set up IFIs that genuinely make a difference. Because when public finances are transparent and accountable, everybody wins.</p>]]></content><author><name>Diego Rodriguez</name></author><category term="Economy"/><category term="Latam"/><category term="Fiscal"/><category term="Analytics"/><category term="ML"/><summary type="html"><![CDATA[A summary of the original paper published on the OECD]]></summary></entry><entry><title type="html">Real Estate Sector in China</title><link href="https://der41.github.io/blog/2023/distill/" rel="alternate" type="text/html" title="Real Estate Sector in China"/><published>2023-11-03T00:00:00+00:00</published><updated>2023-11-03T00:00:00+00:00</updated><id>https://der41.github.io/blog/2023/distill</id><content type="html" xml:base="https://der41.github.io/blog/2023/distill/"><![CDATA[<h2 id="context">Context</h2> <p>The real estate sector represents a significant portion of China‚Äôs economy. <a href="https://scholar.harvard.edu/rogoff/publications/peak-china-housing">Rogoff and Yang (2021)</a> estimate that, prior to the sector‚Äôs crisis, its contribution to the economy‚Äîincluding related industries‚Äîaccounted for approximately 30% of GDP. This figure is well above the median of 16% of GDP for developed countries analyzed in their study. The sector‚Äôs boom was driven by increasing demand for urbanization, economic growth, and government policies favoring investment over the past decade.</p> <p>In China, properties account for more than 50% of household wealth (<a href="https://www.sciencedirect.com/science/article/abs/pii/S1043951X21000730">Li and Zhang, 2021</a>)<d-footnote> In the study by Li and Zhang, real estate as household wealth in European countries reaches a maximum of 30%, while in the United Kingdom, the figure is slightly above 10%.</d-footnote>, and land sales contribute roughly 30% of local government revenues (<a href="https://www.piie.com/publications/working-papers/why-chinas-housing-policies-have-failed">Huang, 2023</a>). Given China‚Äôs global economic significance, and its particular importance for Chile, monitoring the state of its real estate market is of special interest. This blog analyzes the causes of the current crisis and its outlook.</p> <hr/> <h2 id="imbalances">Imbalances</h2> <p>China‚Äôs real estate market has been undergoing a severe contraction since 2021. Over the past two years, housing sales and new housing starts have plummeted by 30% and 60%, respectively (Figure 1). At the same time, housing prices have fallen by around 10% in some cities. This deterioration is attributed to two structural problems:</p> <ol> <li>An oversupply of housing, particularly in lower-income cities;</li> <li>Financial vulnerabilities accumulated by real estate developers during the expansion years.</li> </ol> <div class="l-page" style="display: flex; justify-content: center; align-items: center; margin: 20px 0; overflow: hidden;"> <iframe frameborder="0" sandbox="allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation" scrolling="no" src="https://flo.uri.sh/visualisation/15568110/embed?auto=1" style="box-sizing:border-box; width:700px; height:560px; object-fit: cover; object-position: top;" title="Interactive or visual content"> </iframe> </div> <p>Several factors explain the oversupply in China‚Äôs housing market. On one hand, for many years, there was a high pace of construction, encouraged by government policies as part of its growth strategy. On the other hand, structural factors have weakened demand and are expected to continue doing so in the future. Specifically, population aging and slowing migration flows have reduced demand and are likely to persist in the coming years (<a href="https://www.imf.org/en/Publications/WP/Issues/2022/09/29/A-Tale-of-Tier-3-Cities-524064">Rogoff and Yang, 2022</a>). Additionally, demographic growth is expected to turn negative, homeownership rates are high (90%), and the average age of housing stock is relatively low.</p> <p>In recent years, demand has also been impacted by the pandemic and the real estate market crisis, which has further dampened demand due to doubts about the financial health of developers and declining housing prices.</p> <p>The second structural problem is the financial fragility accumulated by real estate developers. Over the past 20 years, developers accrued debt (from households, banks, and others) at a faster rate than the growth of their assets, leading to an increase in the liabilities-to-assets ratio from about 70% to 80% (Figure 2). This debt increase was driven by government policies favoring the sector and by the developers‚Äô business model.</p> <div class="l-page" style="display: flex; justify-content: center; align-items: center; margin: 20px 0; overflow: hidden;"> <iframe frameborder="0" sandbox="allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation" scrolling="no" src="https://flo.uri.sh/visualisation/15567856/embed?auto=1" style="box-sizing:border-box; width:700px; height:560px; object-fit: cover; object-position: top;" title="Interactive or visual content"> </iframe> </div> <p>This model relies on rapid project turnover, heavy dependence on pre-sales, and significant leverage. A typical cycle involves a developer obtaining pre-sale funds for a housing unit and securing loans from various financial intermediaries to purchase land from local governments. The developer then begins construction, selling unfinished homes years before completion to buyers who start paying mortgages before the houses are fully built. One key vulnerability of this business model is the potential for severe liquidity pressures if any steps in this cycle fail (<a href="https://www.piie.com/publications/working-papers/why-chinas-housing-policies-have-failed">Huang, 2023</a>).</p> <p>These issues significantly affected the sector‚Äôs activity after the introduction of various government policies aimed at controlling the debt levels of real estate developers. In particular, the ‚Äúthree red lines‚Äù policy introduced by the Chinese government in August 2020 set limits on three financial ratios that developers must meet in order to access new credit. Following this policy, only three developers met all the criteria, while the rest failed to meet at least one. Notably, Evergrande, Sunac, and Greenland failed to meet all three. With the contraction of the sector and accumulated vulnerabilities, many companies have experienced significant liquidity and/or solvency problems in recent years, including Evergrande and Country Garden<d-footnote>An example of this is the situation with Evergrande (IEF, second half of 2021) and Country Garden (La Tercera, 2023). </d-footnote>. As a result, these companies have seen significant drops in their valuations, which have not yet recovered (Figure 3).</p> <div class="l-page" style="display: flex; justify-content: center; align-items: center; margin: 20px 0; overflow: hidden;"> <iframe frameborder="0" sandbox="allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation" scrolling="no" src="https://flo.uri.sh/visualisation/15568021/embed?auto=1" style="box-sizing:border-box; width:700px; height:560px; object-fit: cover; object-position: top;" title="Interactive or visual content"> </iframe> </div> <p>Since then, the authorities have implemented various measures to support the sector, though these have had limited effects. Among these measures, packages to restore financing channels for developers and relaxations of restrictions on home purchases for families stand out. As of September this year, the effects have been modest, in a context where consumer confidence remains at historically low levels, housing prices continue to fall, and doubts persist about the financial health of developers. Recently, an expansion of the fiscal deficit by 0.8% of GDP was announced to address the slowdown. This stimulus, to be implemented immediately, could provide some relief (likely temporary) to the sector.</p> <hr/> <h2 id="outlook">Outlook</h2> <p>The sector‚Äôs and China‚Äôs economic outlook will depend on how the government‚Äôs response evolves. If the current situation persists, with relatively limited stimulus efforts, the sector is likely to face a prolonged adjustment, resulting in slow economic growth compared to historical trends. However, if more fiscal stimulus is implemented to reactivate activity and boost confidence, as recently announced, economic activity will likely recover more strongly in the short term but will increase the risk associated with the country‚Äôs elevated sovereign debt levels. A bailout for struggling companies also carries the risk of increasing sovereign debt and potential moral hazard. Lastly, a restructuring of developers‚Äô debt will affect the financial situation of households and banks.</p> <p>Despite the challenges, China‚Äôs situation has two key mitigating factors compared to past crises in other economies. On one hand, the country has accumulated current account surpluses over the last few decades, which limits the possibility of a sudden stop due to a loss of confidence in the country. Additionally, despite the high exposure of the banking sector to the real estate market, the greater prevalence of state ownership in banks reduces the likelihood of a banking crisis in this context.</p> <hr/> <h2 id="references">References</h2> <ul> <li>Rogoff, Kenneth, and Yuanchen Yang. 2021. ‚ÄúHas China‚Äôs Housing Production Peaked?‚Äù China and the World Economy 21 (1): 1-31.</li> <li>Cheng Li, Ying Zhang. 2021. ‚ÄúHow does housing wealth affect household consumption? Evidence from macro-data with special implications for China‚Äù, China Economic Review 69.</li> <li>Huang Tianlei. 2023 ‚ÄúWhy China‚Äôs housing policies have failed‚Äù PIIE Working Paper 23-6.</li> </ul>]]></content><author><name>Lucas Bertinatto</name></author><category term="Economy"/><category term="China"/><category term="Real-Estate"/><category term="Analytics"/><summary type="html"><![CDATA[A translation of the original blog written at the Central Bank of Chile]]></summary></entry><entry><title type="html">Power BI, a Straightforward Tool for Standardized Reporting</title><link href="https://der41.github.io/blog/2023/PowerBI/" rel="alternate" type="text/html" title="Power BI, a Straightforward Tool for Standardized Reporting"/><published>2023-01-10T00:00:00+00:00</published><updated>2023-01-10T00:00:00+00:00</updated><id>https://der41.github.io/blog/2023/PowerBI</id><content type="html" xml:base="https://der41.github.io/blog/2023/PowerBI/"><![CDATA[<h2 id="context">Context:</h2> <h3 id="data-visualization-tools">Data Visualization tools</h3> <p>Power BI has become a leading tool for many organizations, offering robust features and seamless integration with Microsoft‚Äôs ecosystem. Being part of the Microsoft suite, it directly connects to services like Azure, SQL Server, and Excel, making it a top choice for companies across the globe. In 2022, four out of five Fortune 500 companies in the U.S. used Microsoft Office 365, highlighting its widespread adoption.</p> <p>Power BI‚Äôs user-friendly interface allows analysts to quickly create dashboards by simply clicking through the tool‚Äîno advanced programming knowledge is required. This simplicity enables users to leverage its capabilities without diving deep into DAX (Data Analysis Expressions), Power BI‚Äôs advanced analytics language. For those unfamiliar, DAX combines SQL-like database management with the syntax familiarity of Excel, making it approachable yet powerful for complex tasks.</p> <hr/> <h2 id="example">Example</h2> <h3 id="applying-powerbi-to-a-github-dataset">Applying PowerBI to a GitHub Dataset</h3> <p>I worked with the World Economic Outlook (WEO) dataset from the FMI, published in a GitHub repository, to demonstrate how easy it is to use Power BI. Within 15 minutes, I could upload the data, configure basic visuals, and analyze key metrics for a particular country. This level of accessibility makes Power BI an ideal tool for analysts working on tight deadlines or requiring on-the-go reporting.</p> <div class="l-page" style="display: flex; justify-content: center; align-items: center; margin: 20px 0; overflow: hidden;"> <iframe title="Weo" width="700" height="480" src="https://app.powerbi.com/view?r=eyJrIjoiYzJjYzVjNzUtNTRmNC00Yzc5LWI5ZTMtM2JlYjBhNzU0MWIzIiwidCI6ImNiNzJjNTRlLTRhMzEtNGQ5ZS1iMTRhLTFlYTM2ZGZhYzk0YyIsImMiOjF9" frameborder="0" allowfullscreen="true"></iframe> </div> <h3 id="complex-uses">Complex Uses</h3> <p>For organizations managing multiple relational databases or requiring granular data insights, Power BI offers even greater capabilities. Users can navigate between pages for deeper analysis with dynamic text and drill-through functionality. For example, in a dashboard analyzing the U.S. macroeconomic situation, each visual and text element dynamically connects to additional pages, offering further insights into key indicators.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/PowerBI-480.webp 480w,/assets/img/PowerBI-800.webp 800w,/assets/img/PowerBI-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/PowerBI.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <hr/> <h2 id="why-power-bi">Why Power BI?</h2> <p>Suppose your organization relies on relational databases and needs to deliver actionable insights to key stakeholders. In that case, Power BI should be a staple in your toolkit. Its visualization power, integration capabilities, and user-friendliness make it an invaluable asset for businesses striving to stay ahead in today‚Äôs fast-paced environment.</p>]]></content><author><name>Diego Rodriguez</name></author><category term="Dashboard"/><category term="Analytics"/><category term="Automation"/><category term="Visualization"/><summary type="html"><![CDATA[In today‚Äôs data-driven world, insights, interactivity, and accessibility are essential for effective analytics.]]></summary></entry><entry><title type="html">Processing Incoming Data into Actionable Reports</title><link href="https://der41.github.io/blog/2021/pagerank/" rel="alternate" type="text/html" title="Processing Incoming Data into Actionable Reports"/><published>2021-02-17T00:00:00+00:00</published><updated>2021-02-17T00:00:00+00:00</updated><id>https://der41.github.io/blog/2021/pagerank</id><content type="html" xml:base="https://der41.github.io/blog/2021/pagerank/"><![CDATA[<h2 id="context">Context:</h2> <h3 id="organizing-dynamic-data">Organizing Dynamic Data</h3> <p>Have you ever dealt with dynamic data that changes daily, monthly, or quarterly? Each day can bring a completely new dataset, and keeping track of it all can feel overwhelming‚Äîespecially when you need to plan your activities and timeline based on incoming information.</p> <p>Take the international economy, for example. Before the business day begins, you might already have over 16 new global indicators to process. Some will exceed market forecasts, while others fall short. This pattern repeats daily, with different indicators being released every hour.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/economic_calendar-480.webp 480w,/assets/img/economic_calendar-800.webp 800w,/assets/img/economic_calendar-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/economic_calendar.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <hr/> <h2 id="pagerank">PageRank</h2> <h3 id="how-can-we-organize-this-chaos">How Can We Organize This Chaos?</h3> <p>The simplest inspiration comes from the PageRank algorithm, originally developed by Google to rank web pages. While Google has since evolved its ranking methods, the foundational concept remains powerful.</p> <p>In a nutshell, PageRank assigns a score of importance to each page, based on the principle that a page becomes more important if other important pages link to it. It‚Äôs a recursive system: the importance of a page is determined by the importance of the pages linking to it.As Eric Roberts from Stanford describes, you can imagine a random surfer clicking through links on the web. The PageRank of any given page is the probability that the surfer will land on it. Pages with more incoming links from important sources are more likely to attract the surfer, and thus rank higher in search results. You can find a link to his slides <a href="https://web.stanford.edu/class/cs54n/handouts/24-GooglePageRankAlgorithm.pdf">here</a>.</p> <p>This same logic can be applied to dynamic data. While PageRank used hyperlinks as the core measure for cataloging the early internet, we can adapt its principles to organize economic indicators‚Äîleveraging domain knowledge about the data to create a meaningful ranking system.</p> <hr/> <h2 id="application">Application</h2> <h3 id="applying-pagerank-principles-to-economic-data">Applying PageRank Principles to Economic Data</h3> <p>To make sense of chaotic economic data, we need to answer some key questions about the information:</p> <ol> <li>Do we know the frequency of the data release?</li> <li>How valuable is this information each time it‚Äôs updated?</li> <li>Are there other characteristics that help predict its relevance and usage?</li> <li>Can we generate metrics that improve our summaries of incoming data?</li> </ol> <p>Answering these questions with confidence allows us to rank the data effectively. This, in turn, enables more efficient querying and retrieval of relevant information, whether it‚Äôs data that‚Äôs about to be released or historical data for comparison.</p> <p>Let‚Äôs use an example. Below is a lookup table that synthesizes the importance of different economic indicators for workflow planning.</p> <table> <thead> <tr> <th>Country</th> <th>Data</th> <th>Coming Up Next Week</th> <th>Importance for Workflow</th> </tr> </thead> <tbody> <tr> <td>USA</td> <td>Employment</td> <td>Yes (1)</td> <td>Very High (5)</td> </tr> <tr> <td>USA</td> <td>Factory Orders</td> <td>Yes (1)</td> <td>Medium (3)</td> </tr> <tr> <td>USA</td> <td>Consumer Confidence</td> <td>No (0)</td> <td>High (4)</td> </tr> <tr> <td>EU</td> <td>Consumer Confidence</td> <td>Yes (1)</td> <td>High (4)</td> </tr> <tr> <td>GER</td> <td>Factory Orders</td> <td>Yes (1)</td> <td>Low (1)</td> </tr> <tr> <td>CHN</td> <td>Aggregate Social Finance</td> <td>No (0)</td> <td>Very High (5)</td> </tr> </tbody> </table> <p>In this table:</p> <p>‚ÄúComing Up Next Week‚Äù is a binary indicator of whether the data will be released soon. ‚ÄúImportance for Workflow‚Äù reflects how critical the information is for decision-making. By combining these metrics, we calculate a final score (e.g., by multiplying the two values) to prioritize incoming data.</p> <hr/> <h2 id="python-example">Python Example</h2> <h3 id="from-manual-tracking-to-automation">From Manual Tracking to Automation</h3> <p>Here‚Äôs how Python can be used to streamline this process. First, create a DataFrame with your lookup table and another DataFrame holding the forecast, expected, and previous values of the data. Then, merge these tables, calculate the scores, and sort the data to highlight the most critical updates.</p> <div class="jupyter-notebook" style="position: relative; width: 100%; margin: 0 auto;"> <div class="jupyter-notebook-iframe-container"> <iframe src="/assets/jupyter/pagerank.ipynb.html" style="position: absolute; top: 0; left: 0; border-style: none;" width="100%" height="100%" onload="this.parentElement.style.paddingBottom = (this.contentWindow.document.documentElement.scrollHeight + 10) + 'px'"></iframe> </div> </div> <p>This process scales seamlessly. While the example only involves six data entries, the same logic applies to organizing thousands of entries weekly. By automating with lookup tables and scripts, you can shift your focus from manual tracking to strategic analysis.</p> <h2 id="conclusions">Conclusions</h2> <h3 id="a-smarter-way-to-manage-dynamic-data">A Smarter Way to Manage Dynamic Data</h3> <p>By borrowing ideas from PageRank and leveraging domain knowledge, you can transform chaotic streams of key indicators into a structured, actionable workflow. Automation ensures that even large volumes of data remain manageable, letting you focus on decision-making instead of data wrangling.</p> <p>So next time you‚Äôre buried in dynamic data, think about how you can rank and organize it‚Äîbecause smarter tools will translate into smarter decisions.</p>]]></content><author><name>Diego Rodriguez</name></author><category term="Dashboard"/><category term="Analytics"/><category term="Automation"/><category term="AI"/><category term="code"/><summary type="html"><![CDATA[Applying a PageRank principle to unknown information]]></summary></entry><entry><title type="html">Effortless Real-Time Data Monitoring</title><link href="https://der41.github.io/blog/2020/iframes/" rel="alternate" type="text/html" title="Effortless Real-Time Data Monitoring"/><published>2020-06-06T00:00:00+00:00</published><updated>2020-06-06T00:00:00+00:00</updated><id>https://der41.github.io/blog/2020/iframes</id><content type="html" xml:base="https://der41.github.io/blog/2020/iframes/"><![CDATA[<h2 id="context">Context:</h2> <h3 id="leveraging-embedded-tools-for-real-time-data">Leveraging Embedded Tools for Real-Time Data</h3> <p>Have you ever needed to track a subject, but simply didn‚Äôt have the time to constantly update and check all the necessary information? I faced a similar challenge a few months ago.</p> <p>We were tasked with monitoring the development of the Covid-19 pandemic worldwide on a daily basis. However, we lacked the tools to access and process the information with the level of detail and frequency we needed, while also keeping track of the usual economic indicators we were monitoring.</p> <p>This is where the internet can be a game-changer. When you find the right source, in the right place, it becomes incredibly easy to consolidate information and keep your audience informed about current developments without unnecessary effort.</p> <hr/> <h2 id="owid">OWID</h2> <h3 id="our-world-in-data-a-lifesaver-for-real-time-tracking-of-covid-19">Our World in Data: A Lifesaver for Real-Time Tracking of Covid-19</h3> <p>OurWorldinData (OWID) did an outstanding job of tracking the pandemic in real-time. Thanks to them, we were able to embed their information directly into our trackers, allowing us to see what‚Äôs happening across the world without spending any extra time on the tedious process of Extracting, Transforming, and Loading (ETL) an increasing variety of data. For example, the graph below shows the Oxford Stringency Index across various countries, and we‚Äôre not loading any data ourselves. We‚Äôre simply using an embedded iframe from OWID‚Äôs website.</p> <div class="l-page" style="display: flex; justify-content: center; align-items: center; margin: 20px 0; overflow: hidden;"> <iframe src="https://ourworldindata.org/explorers/covid?country=USA~ITA~CAN~DEU~GBR~FRA&amp;hideControls=true&amp;Metric=Stringency+index&amp;Interval=7-day+rolling+average&amp;Relative+to+population=true&amp;tab=chart" loading="lazy" style="width: 68%; height: 600px; border: 0px none;" allow="web-share; clipboard-write"> </iframe> </div> <hr/> <h2 id="iframes">iFrames</h2> <h3 id="what-is-it-and-how-does-it-work">What Is It and How Does It Work?</h3> <p>In essence, an iframe (short for ‚Äúinline frame‚Äù) allows you to embed another HTML document within your current web page, creating a ‚Äúpage within a page.‚Äù This feature is commonly used to display content such as videos, maps, or forms from another website without redirecting your audience elsewhere. In our case, we embedded a specific view from <a href="https://ourworldindata.org/metrics-explained-covid19-stringency-index">OWID</a> website‚Äîjust one of many useful resources available in real-time.</p> <p>Here is a look to the underlying iframe object presented above:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span>
  <span class="na">class=</span><span class="s">"l-page"</span>
  <span class="na">style=</span><span class="s">"display: flex; justify-content: center; 
align-items: center; margin: 20px 0; overflow: hidden;"</span>
<span class="nt">&gt;</span>
  <span class="nt">&lt;iframe</span>
    <span class="na">src=</span><span class="s">"https://ourworldindata.org/explorers/covid?country=USA~ITA~CAN~DEU~GBR~FRA&amp;hideControls=true&amp;Metric=Stringency+index&amp;Interval=7-day+rolling+average&amp;Relative+to+population=true&amp;tab=chart"</span>
    <span class="na">loading=</span><span class="s">"lazy"</span>
    <span class="na">style=</span><span class="s">"width: 68%; height: 600px; border: 0px none;"</span>
    <span class="na">allow=</span><span class="s">"web-share; clipboard-write"</span>
  <span class="nt">&gt;</span>
  <span class="nt">&lt;/iframe&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div> <hr/> <h2 id="minimal-dashboards">Minimal Dashboards</h2> <h3 id="with-minimal-effort">With Minimal Effort</h3> <p>These kinds of tools are incredibly helpful for organizing information in a dashboard format. By doing so, you can get a quick overview of developments on a given topic, saving time and effort. That‚Äôs exactly how we kept track of the pandemic without investing unnecessary resources into data extraction or management. The image below illustrates how we organized and tracked the data effectively back then.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/Iframe_dashboard-480.webp 480w,/assets/img/Iframe_dashboard-800.webp 800w,/assets/img/Iframe_dashboard-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/Iframe_dashboard.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>In summary, this approach is invaluable when your primary goal is staying informed and thinking strategically about the next steps in your analysis. By leveraging external resources like OWID and embedding them into dashboards, we were able to gain significant insights with minimal effort, allowing us to focus on what truly matters without getting bogged down by complex data workflows.</p>]]></content><author><name>Diego Rodriguez</name></author><category term="Dashboard"/><category term="Analytics"/><category term="Automation"/><summary type="html"><![CDATA[When you require information without ETL]]></summary></entry></feed>